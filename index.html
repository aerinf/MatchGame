<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Match Game</title>
    <script>
        function initialize() {
            var tile1 = document.getElementById("tile1");
            var tile2 = document.getElementById("tile2");
            var tile3 = document.getElementById("tile3");
            var tile4 = document.getElementById("tile4");
            var tile5 = document.getElementById("tile5");
            var tile6 = document.getElementById("tile6");
            var tile7 = document.getElementById("tile7");
            var tile8 = document.getElementById("tile8");
            var tile9 = document.getElementById("tile9");
            var tile10 = document.getElementById("tile10");
            var tile11 = document.getElementById("tile11");
            var tile12 = document.getElementById("tile12");
            var tile13 = document.getElementById("tile13");
            var tile14 = document.getElementById("tile14");
            var tile15 = document.getElementById("tile15");
            var tile16 = document.getElementById("tile16");
            var tutorial = document.getElementById("tutorial");
            scoreNum = 0;
            lastClick="";
            tile1.style.display="none";
            tile2.style.display="none";
            tile3.style.display="none";
            tile4.style.display="none";
            tile5.style.display="none";
            tile6.style.display="none";
            tile7.style.display="none";
            tile8.style.display="none";
            tile9.style.display="none";
            tile10.style.display="none";
            tile11.style.display="none";
            tile12.style.display="none";
            tile13.style.display="none";
            tile14.style.display="none";
            tile15.style.display="none";
            tile16.style.display="none";
            run = true;
        }
        function randomize() {
            let images=["cat.jpg", "clover.webp", "diamond.png", "dog.png", 
                            "fox.png", "panda.jpeg", "spade.jpeg", "sun.jpeg", 
                            "cat.jpg", "clover.webp", "diamond.png", "dog.png", 
                            "fox.png", "panda.jpeg", "spade.jpeg", "sun.jpeg"];
            let i = 0;
            let finalImages=[];
            while (images.length > 0) {
                let random = parseInt(Math.random() * images.length);
                finalImages.push(images[random]);
                images.splice(random, 1);
            }
            
            console.log("Images: " + images);
            console.log("finalImages: " + finalImages);
            tile1.src="images/" + finalImages[0];
            tile2.src="images/" + finalImages[1];
            tile3.src="images/" + finalImages[2];
            tile4.src="images/" + finalImages[3];

            tile5.src="images/" + finalImages[4];
            tile6.src="images/" + finalImages[5];
            tile7.src="images/" + finalImages[6];
            tile8.src="images/" + finalImages[7];

            tile9.src="images/" + finalImages[8];
            tile10.src="images/" + finalImages[9];
            tile11.src="images/" + finalImages[10];
            tile12.src="images/" + finalImages[11];

            tile13.src="images/" + finalImages[12];
            tile14.src="images/" + finalImages[13];
            tile15.src="images/" + finalImages[14];
            tile16.src="images/" + finalImages[15];
            reset();
        }
        function flip(t) {
            if (t.style.display=="none"  && run) {
                if (scoreNum%2==0) {
                    if (t.style.display=="none") {
                        t.style.display="inline";
                        iterateScore();
                    }
                    else {
                    }
                    lastClick=t.src;
                    lastObj=t;
                }
                else {
                    if (t.src==lastClick) {
                        t.style.display="inline";
                    }
                    else {
                        t.style.display="inline";
                        run=false;
                        setTimeout(() => { 
                            t.style.display="none";
                            lastObj.style.display="none"; 
                            run=true;
                        }, 500);
                    }
                    iterateScore();
                }
            }
            gameOver();
        }
        function gameOver() {
            if (tile1.style.display=="inline" && tile2.style.display=="inline" && tile3.style.display=="inline" && tile4.style.display=="inline" && tile5.style.display=="inline" && tile6.style.display=="inline" && tile7.style.display=="inline" && tile8.style.display=="inline" && tile9.style.display=="inline" && tile10.style.display=="inline" && tile11.style.display=="inline" && tile12.style.display=="inline" && tile13.style.display=="inline" && tile14.style.display=="inline" && tile15.style.display=="inline" && tile16.style.display=="inline") 
            {
                if (scoreNum==16) {
                    tutorial.innerHTML="Wow, perfect score!"
                }
                else if (scoreNum < 30) {
                    tutorial.innerHTML="Good score!"
                }
                else {
                    tutorial.innerHTML=scoreNum + " clicks? Try to do better next time."
                }
            }
        }
        function iterateScore() {
            scoreNum++;
            document.getElementById("score").innerHTML = "Clicks: " + scoreNum;
        }
        function reset() {
            tile1.style.display="none";
            tile1.className="";
            tile2.style.display="none";
            tile2.className="";
            tile3.style.display="none";
            tile3.className="";
            tile4.style.display="none";
            tile4.className="";
            tile5.style.display="none";
            tile5.className="";
            tile6.style.display="none";
            tile6.className="";
            tile7.style.display="none";
            tile7.className="";
            tile8.style.display="none";
            tile8.className="";
            tile9.style.display="none";
            tile9.className="";
            tile10.style.display="none";
            tile10.className="";
            tile11.style.display="none";
            tile11.className="";
            tile12.style.display="none";
            tile12.className="";
            tile13.style.display="none";
            tile13.className="";
            tile14.style.display="none";
            tile14.className="";
            tile15.style.display="none";
            tile15.className="";
            tile16.style.display="none";
            tile16.className="";
            scoreNum = 0;
            document.getElementById("score").innerHTML = "Clicks: " + scoreNum;
            tutorial.innerHTML="Click on a tile to flip it over. Then click on another. If they match, they'll stay revealed, but if they don't, they'll flip back over. The game ends when all tiles are revealed. Try to keep your score low!"
        }
    </script>
</head>
<body onload="initialize();">
    <div class="flexContainer">
        <div class="container">
            <div class="tile" onclick="flip(tile1);"><img id="tile1" src="images/clover.webp"></div>
            <div class="tile" onclick="flip(tile2);"><img id="tile2" src="images/sun.jpeg "></div>
            <div class="tile" onclick="flip(tile3);"><img id="tile3" src="images/spade.jpeg "></div>
            <div class="tile" onclick="flip(tile4);"><img id="tile4" src="images/panda.jpeg "></div>
            
            <div class="tile" onclick="flip(tile5);"><img id="tile5" src="images/dog.png "></div>
            <div class="tile" onclick="flip(tile6);"><img id="tile6" src="images/clover.webp "></div>
            <div class="tile" onclick="flip(tile7);"><img id="tile7" src="images/fox.png "></div>
            <div class="tile" onclick="flip(tile8);"><img id="tile8" src="images/fox.png "></div>

            <div class="tile" onclick="flip(tile9);"><img id="tile9" src="images/spade.jpeg "></div>
            <div class="tile" onclick="flip(tile10);"><img id="tile10" src="images/sun.jpeg "></div>
            <div class="tile" onclick="flip(tile11);"><img id="tile11" src="images/diamond.png "></div>
            <div class="tile" onclick="flip(tile12);"><img id="tile12" src="images/cat.jpg "></div>

            <div class="tile" onclick="flip(tile13);"><img id="tile13" src="images/panda.jpeg "></div>
            <div class="tile" onclick="flip(tile14);"><img id="tile14" src="images/diamond.png "></div>
            <div class="tile" onclick="flip(tile15);"><img id="tile15" src="images/cat.jpg "></div>
            <div class="tile" onclick="flip(tile16);"><img id="tile16" src="images/dog.png "></div>
        </div>
        <div id="tutorial">
            Click on a tile to flip it over. Then click on another. If they match, 
            they'll stay revealed, but if they don't, they'll flip back over. 
            The game ends when all tiles are revealed. Try to keep your score low!
        </div>
    </div>
    <div id="accoutrements">
        <div id="score">Clicks: 0</div>
        <button onclick="reset();">reset</button>
        <button id="random" onclick="randomize();">randomize</button>
    </div>
</body>
</html>